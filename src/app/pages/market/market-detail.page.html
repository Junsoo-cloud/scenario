@if (script$ | async; as script) {
  <section class="detail-layout">
    <div class="detail-main">
      <div class="detail-head">
        <span class="badge">{{ script.category }}</span>
        <h1>{{ script.title }}</h1>
        <p class="logline">{{ script.logline }}</p>
        <div class="meta">
          <span>{{ script.genre }}</span>
          <span>{{ script.runtime }}</span>
          <span>{{ script.targetAge }}</span>
        </div>
      </div>

      <div class="info-grid">
        <article>
          <h3>시놉시스</h3>
          <p>{{ script.synopsis }}</p>
        </article>
        <article>
          <h3>키워드</h3>
          <div class="tags">
            @for (tag of script.keywords; track tag) {
              <span>#{{ tag }}</span>
            }
          </div>
        </article>
        <article>
          <h3>판매자 정보</h3>
          <p>작가 {{ script.sellerName }} · 포트폴리오 검수 완료</p>
          <a class="link" routerLink="/community">작가 인터뷰 보기</a>
        </article>
      </div>

      <div class="preview">
        <div>
          <h3>미리보기</h3>
          <p>샘플 6페이지 공개 · 워터마크 적용</p>
        </div>
        <button class="btn ghost">샘플 PDF 보기</button>
      </div>

      <section class="section">
        <h2>리뷰</h2>
        <div class="review">
          <div>
            <strong>제작사 A</strong>
            <span>★★★★☆</span>
          </div>
          <p>스케일과 캐릭터가 잘 잡혀 있어 바로 개발 가능성이 높아 보입니다.</p>
        </div>
      </section>
    </div>

    <aside class="detail-side">
      <div class="purchase-card">
        <h3>구매/문의</h3>
        <p class="price">
          @if (script.priceType === '고정가') {
            {{ script.price | currency:'KRW':'symbol':'1.0-0' }}
          } @else {
            {{ script.priceType }}
          }
        </p>
        <button class="btn primary">즉시 구매</button>
        <button class="btn ghost">제작 문의하기</button>
        <div class="stats">
          <span>조회 {{ script.views }}</span>
          <span>찜 {{ script.likes }}</span>
          <span>리뷰 {{ script.reviews }}</span>
        </div>
        <div class="divider"></div>
        <div class="note">
          <p>구매 후 전체 PDF 다운로드 권한이 부여됩니다.</p>
        </div>
      </div>

      <div class="related">
        <h4>비슷한 시나리오</h4>
        @if (related$ | async; as related) {
          @for (item of related; track item.id) {
            <a class="related-card" [routerLink]="['/market', item.id]">
              <span>{{ item.title }}</span>
              <span class="meta">{{ item.genre }}</span>
            </a>
          }
        }
      </div>
    </aside>
  </section>
}
